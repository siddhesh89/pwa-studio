<!DOCTYPE html>
<html lang="" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Add aggregator | Magento PWA Documentation</title>
	<meta name="description" content="Everything you need to build a Magento PWA.">

	<link rel="stylesheet" href="/pwa-studio/assets/css/app.css?ver=7" />
	<link rel="stylesheet" href="/pwa-studio/assets/css/print.css?ver=7" media="print"/>

	<link rel="stylesheet" href="/pwa-studio/builds/css/main.css" />

<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

	<script>
  var baseUrl = "/pwa-studio";
  var algolia = {
    id : "E642SEDTHL",
    index: "pwa-devdocs",
    key: "d2d0f33ab73e291ef8d88d8b565e754c"
  };

  var indices = [
    {
      label: "PWA",
      name: "pwa-devdocs",
      baseUrl: "https://pwastudio.io"
    },
    {
      label: "DevDocs",
      name: "devdocs",
      facets: [["guide_version: 2.3", "versionless: true"]],
      refinements: [
        {
          label: "Functional areas",
          attribute: "functional_areas"
        }
      ],
      baseUrl: "https://devdocs.magento.com"
    },
    {
      label: "User Guide",
      name: "merchdocs_ee",
      baseUrl: "https://docs.magento.com/m2/ee/user_guide"
    },
    {
      label: "MBI User Guide",
      name: "merchdocs-mbi",
      baseUrl: "https://docs.magento.com/mbi"
    },
    {
      label: "Order Management",
      name: "oms-en",
      baseUrl: "https://omsdocs.magento.com"
    }
  ];
</script>



<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-KRCLXBB');</script>
<!-- End Google Tag Manager -->




	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body class="layout-default">


	<header class="site-header">
		<nav class="site-nav">

  <div class="nav-container">

    <div class="menu-btn">
      <button id="menu-btn" class="menu-trigger menu-icon" aria-haspopup="true" aria-controls="nav-main" aria-label="Menu"></button>
    </div>

    <a class="logo" data-proofer-ignore href="/pwa-studio/">
      <img src="/pwa-studio/assets/i/m-logo.svg" alt="">
      <img src="/pwa-studio/assets/i/magento-logo.svg" alt="Magento" class="magento-logo" />
      <span class="site-logo">PWA Docs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      

      <!-- Main Navigation -->
<ul class="nav-main" role="menubar">

  
  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span href="#" data-proofer-ignore tabindex="-1">Getting Started</span>
    <div class="nav-popup">
      <ul>
        
        <li role="menuitem">
          <a href="/pwa-studio/technologies/overview/">Overview</a>
        </li> 
        
        <li role="menuitem">
          <a href="/pwa-studio/technologies/storefront-architecture/">Storefront architecture</a>
        </li> 
        
        <li role="menuitem">
          <a href="/pwa-studio/technologies/basic-concepts/">Basic concepts</a>
        </li> 
        
        <li role="menuitem">
          <a href="/pwa-studio/pwa-buildpack/">PWA Buildpack</a>
        </li> 
        
        <li role="menuitem">
          <a href="/pwa-studio/peregrine/">Peregrine</a>
        </li> 
        
        <li role="menuitem">
          <a href="/pwa-studio/venia-pwa-concept/">Venia storefront concept</a>
        </li> 
        
        <li role="menuitem">
          <a href="/pwa-studio/technologies/upward/">UPWARD</a>
        </li> 
        
      </ul>
    </div>
  </li>

  

  
  <li class="menuitem ">
      <a href="/pwa-studio/tutorials/">Tutorials</a>
  </li>
  

  
  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span href="#" data-proofer-ignore tabindex="-1">Reference API</span>
    <div class="nav-popup">
      <ul>
        
        <li role="menuitem">
          <a href="/pwa-studio/pwa-buildpack/reference/buildpack-cli/">PWA Buildpack</a>
        </li> 
        
        <li role="menuitem">
          <a href="/pwa-studio/peregrine/reference/item/">Peregrine API</a>
        </li> 
        
        <li role="menuitem">
          <a href="/pwa-studio/venia-ui/reference/components/Button/">Venia UI API</a>
        </li> 
        
      </ul>
    </div>
  </li>

  

  
  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span href="#" data-proofer-ignore tabindex="-1">Integrations</span>
    <div class="nav-popup">
      <ul>
        
        <li role="menuitem">
          <a href="/pwa-studio/pagebuilder/">Page Builder</a>
        </li> 
        
      </ul>
    </div>
  </li>

  

</ul>

    </div>

    <div class="nav-actions">
        
<div class="app-switcher">
  <div class="dropdown">
    <button id="app-switcher-trigger" class="app-switcher-trigger" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="Documentation sites"></button>
    <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="app-switcher-trigger" role="menu">
      <div class="app-switcher-content">
      
      <div class="app-switcher-group">
        <h3 class="app-swither-group-title">Developer</h3>
        
        <li role="menuitem"><a class="dropdown-item" href="https://devdocs.magento.com/?itm_source=pwa-devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Commerce Developer Documentation">Commerce Developer Documentation</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="http://pwastudio.io/?itm_source=pwa-devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=PWA Studio">PWA Studio</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="https://omsdocs.magento.com/en/?itm_source=pwa-devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Order Management">Order Management</a></li>
        
      </div>
      
      <div class="app-switcher-group">
        <h3 class="app-swither-group-title">Merchant</h3>
        
        <li role="menuitem"><a class="dropdown-item" href="https://docs.magento.com/m2/ee/user_guide/?itm_source=pwa-devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Commerce User Guide">Commerce User Guide</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="https://omsdocs.magento.com/en/userguides/?itm_source=pwa-devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Order Management">Order Management</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="https://docs.magento.com/mbi/?itm_source=pwa-devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Business Intelligence">Business Intelligence</a></li>
        
        <li role="menuitem"><a class="dropdown-item" href="https://docs.magento.com/marketplace/user_guide/getting-started.html?itm_source=pwa-devdocs&itm_medium=top_nav&itm_campaign=app_switcher&itm_term=Marketplace">Marketplace</a></li>
        
      </div>
      
      </div>
    </ul>
  </div>
</div>


        <div class="search-btn">
          <button class="search-trigger search-icon" aria-label="Search"></button>
        </div>
    
        <form class="quick-search" action="/pwa-studio/search/" method="get" novalidate="novalidate">
          <input type="search" name="query" placeholder="Search" />
          <button class="quick-search-close" aria-label="Close search">&times;</button>
        </form>

    </div>

  </div>
</nav><!-- .site-nav -->
<div class="nav-main-fader"></div>

	</header>

	<div class="global-wrapper">
		<div class="message-banner">
If you have any project questions, concerns, or contribution ideas, join our <a href="https://magentocommeng.slack.com/messages/C71HNKYS2"><strong>#pwa</strong></a> Slack channel.
Find out how to create an account by visiting <a href="https://devdocs.magento.com/community/resources/resources.html">Community Resources</a>
</div>


		<div class="main-container">
			<a id="main-content"></a>


<div class="content-container">

	<!-- sidebar -->
<aside class="sidebar">
    <button class="toc-toggler">Table of Contents</button>
    <div class="sidebar-wrapper">

      






<div class="menu-section">
    <div class="toc-entry"><h4 class="guide-title">Page Builder</h4></div>

    <ul class="table-of-contents">
    
        <li >
            
            <a href="/pwa-studio/pagebuilder/" class=" ">Integration</a>
            

            
        </li>
    
        <li >
            
            <a href="/pwa-studio/pagebuilder/known-limitations/" class=" ">Known limitations</a>
            

            
        </li>
    
        <li >
            
            <span>Creating custom components</span>
            

            
            <ul>
            
                <li >
                    
                    <a href="/pwa-studio/pagebuilder/custom-components/overview/" class=" ">Overview</a>
                    
                </li>
            
                <li >
                    
                    <a href="/pwa-studio/pagebuilder/custom-components/setup-component/" class=" ">Set up component</a>
                    
                </li>
            
                <li class="active">
                    
                    <a href="/pwa-studio/pagebuilder/custom-components/add-aggregator/" class=" ">Add aggregator</a>
                    
                </li>
            
                <li >
                    
                    <a href="/pwa-studio/pagebuilder/custom-components/add-stylesheet/" class=" ">Add stylesheet</a>
                    
                </li>
            
                <li >
                    
                    <a href="/pwa-studio/pagebuilder/custom-components/add-component/" class=" ">Add component</a>
                    
                </li>
            
                <li >
                    
                    <a href="/pwa-studio/pagebuilder/custom-components/debugging/" class=" ">Debugging tips</a>
                    
                </li>
            
            </ul>
            
        </li>
    
        <li >
            
            <a href="/pwa-studio/pagebuilder/utility-functions/" class=" ">Utility functions</a>
            

            
        </li>
    
        <li >
            
            <span>Components</span>
            

            
            <ul>
            
                <li >
                    
                    <a href="/pwa-studio/pagebuilder/components/banner/" class=" ">Banner</a>
                    
                </li>
            
                <li >
                    
                    <a href="/pwa-studio/pagebuilder/components/block/" class=" ">Block</a>
                    
                </li>
            
                <li >
                    
                    <a href="/pwa-studio/pagebuilder/components/buttons/" class=" ">Buttons</a>
                    
                </li>
            
                <li >
                    
                    <a href="/pwa-studio/pagebuilder/components/column/" class=" ">Column</a>
                    
                </li>
            
                <li >
                    
                    <a href="/pwa-studio/pagebuilder/components/divider/" class=" ">Divider</a>
                    
                </li>
            
                <li >
                    
                    <a href="/pwa-studio/pagebuilder/components/heading/" class=" ">Heading</a>
                    
                </li>
            
                <li >
                    
                    <a href="/pwa-studio/pagebuilder/components/html/" class=" ">HTML Code</a>
                    
                </li>
            
                <li >
                    
                    <a href="/pwa-studio/pagebuilder/components/image/" class=" ">Image</a>
                    
                </li>
            
                <li >
                    
                    <a href="/pwa-studio/pagebuilder/components/map/" class=" ">Map</a>
                    
                </li>
            
                <li >
                    
                    <a href="/pwa-studio/pagebuilder/components/products/" class=" ">Products</a>
                    
                </li>
            
                <li >
                    
                    <a href="/pwa-studio/pagebuilder/components/row/" class=" ">Row</a>
                    
                </li>
            
                <li >
                    
                    <a href="/pwa-studio/pagebuilder/components/slider/" class=" ">Slider</a>
                    
                </li>
            
                <li >
                    
                    <a href="/pwa-studio/pagebuilder/components/tabs/" class=" ">Tabs</a>
                    
                </li>
            
                <li >
                    
                    <a href="/pwa-studio/pagebuilder/components/text/" class=" ">Text</a>
                    
                </li>
            
                <li >
                    
                    <a href="/pwa-studio/pagebuilder/components/video/" class=" ">Video</a>
                    
                </li>
            
            </ul>
            
        </li>
    
    </ul>
</div>



    </div>
</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	<h1 class="page-heading">Add aggregator</h1>
</section>

			<p>The purpose of the configuration aggregator (<code class="highlighter-rouge">configAggregator</code>) is to retrieve properties from a content type’s HTML and return those properties as a flat object of <code class="highlighter-rouge">key:values</code>. The framework (specifically the <code class="highlighter-rouge">&lt;ContentTypeFactory /&gt;</code>) then passes this object to your component, where you can assign the properties to your component’s corresponding properties for rendering within a PWA Studio app.</p>

<p><img src="images/AddAggregatorOverview.svg" alt="Aggregator Overview" /></p>

<h2 id="content-type-html">Content type HTML</h2>

<p>The key to building out your aggregator is knowing the structure, content, and properties available in your content type’s master format. You can do this the hard way by looking in the database of your Magento instance (specifically, the <code class="highlighter-rouge">content</code> field in the <code class="highlighter-rouge">cms_page</code> and <code class="highlighter-rouge">cms_block</code> tables). But there is a better way.</p>

<p><strong>Protip</strong>: Place a <code class="highlighter-rouge">console.log(node)</code> at the top of your <code class="highlighter-rouge">configAggregator</code> function so you can see exactly what your content type’s HTML (the <code class="highlighter-rouge">HTMLElement</code> passed by the framework) looks like. In the <code class="highlighter-rouge">ExampleQuote</code> starter code, you would add it as shown here:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="k">default</span> <span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="c1">// Retrieve properties from node here</span>
    <span class="p">};</span>
<span class="p">};</span>
</code></pre></div></div>

<p>The console output should look something like this:</p>

<p><img src="images/AggregatorHTMLConsoleOutput.png" alt="Content type HTML" /></p>

<p>The <code class="highlighter-rouge">node</code> (HTMLElement) passed to the aggregator contains only your content type’s HTML from the master format, not the entire master format as you would find in the database.</p>

<h2 id="the-aggregator">The Aggregator</h2>

<p>The interface for a <code class="highlighter-rouge">configAggregator</code> is:</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nx">node</span><span class="p">:</span> <span class="nx">HTMLElement</span><span class="p">,</span> <span class="nx">props</span><span class="p">:</span> <span class="p">{</span><span class="nl">contentType</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">appearance</span><span class="p">:</span> <span class="nx">string</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{[</span><span class="na">key</span><span class="p">:</span> <span class="nx">string</span><span class="p">]:</span> <span class="nx">any</span><span class="p">}</span>
</code></pre></div></div>

<p>To recap, the purpose of your component’s aggregator is to collect (aggregate) properties from your content type’s HTML and return a property object for use in your component. The object you return should contain all the text, html, inline styles, and classes you need to faithfully reproduce your content type as a component in PWA Studio.</p>

<p>Let’s look at our Quote content HTML in detail (color coded for easier analysis) to determine the properties we want to pass to our component:</p>

<p><img src="images/MasterFormatHTML.svg" alt="Master format HTML" /></p>

<p>Here’s what we think we need for our component:</p>

<ul>
  <li>The inline <strong>styles</strong> from the main node</li>
  <li>The <strong>text</strong> content from the <code class="highlighter-rouge">&lt;blockquote&gt;</code> and <code class="highlighter-rouge">author</code> nodes</li>
  <li>The <strong>HTML</strong> content from the <code class="highlighter-rouge">description</code> node</li>
  <li>The CSS <strong>classes</strong> from all three child nodes (<code class="highlighter-rouge">&lt;blockquote&gt;</code>, <code class="highlighter-rouge">author</code>, and <code class="highlighter-rouge">description</code>)</li>
</ul>

<p>To retrieve these properties, you’ll want to use a combination of <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement">HTMLElement DOM properties</a> along with our <a href="/pwa-studio/pagebuilder/utility-functions/">utility functions</a>, as shown next in the example.</p>

<h3 id="example-aggregator">Example aggregator</h3>

<p>Here is the aggregator we use for the <code class="highlighter-rouge">ExampleQuote</code> component:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">getAdvanced</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../../utils</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="na">quote</span><span class="p">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">textContent</span><span class="p">,</span>
        <span class="na">author</span><span class="p">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">textContent</span><span class="p">,</span>
        <span class="na">description</span><span class="p">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">innerHTML</span><span class="p">,</span>
        <span class="p">...</span><span class="nx">getAdvanced</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span>
    <span class="p">};</span>
<span class="p">};</span>
</code></pre></div></div>

<p>First we <code class="highlighter-rouge">import</code> the <a href="/pwa-studio/pagebuilder/utility-functions/">utility functions</a> we want to use. In our case, we know that our Quote content type provides end users with the Advanced form section. So we import the <code class="highlighter-rouge">getAdvanced()</code> function from <code class="highlighter-rouge">utils.js</code>. This function is a wrapper that just runs a number of other utility functions that can be used independently if these values are on different nodes:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">function</span> <span class="nx">getAdvanced</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="p">...</span><span class="nx">getPadding</span><span class="p">(</span><span class="nx">node</span><span class="p">),</span>
        <span class="p">...</span><span class="nx">getMargin</span><span class="p">(</span><span class="nx">node</span><span class="p">),</span>
        <span class="p">...</span><span class="nx">getBorder</span><span class="p">(</span><span class="nx">node</span><span class="p">),</span>
        <span class="p">...</span><span class="nx">getTextAlign</span><span class="p">(</span><span class="nx">node</span><span class="p">),</span>
        <span class="p">...</span><span class="nx">getCssClasses</span><span class="p">(</span><span class="nx">node</span><span class="p">),</span>
        <span class="p">...</span><span class="nx">getIsHidden</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span>
    <span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Then we use the <code class="highlighter-rouge">element</code> names from the content type HTML (color coded in green above) as our property key names: <code class="highlighter-rouge">quote</code>, <code class="highlighter-rouge">author</code>, and <code class="highlighter-rouge">description</code>. Naming your properties like this helps to identify where the data in the component comes from.</p>

<p>Next, we use the <code class="highlighter-rouge">textContent</code> and <code class="highlighter-rouge">innerHTML</code> DOM properties to grab the text and html values from the appropriate <code class="highlighter-rouge">childNodes</code>.</p>

<p>Finally, we use the <code class="highlighter-rouge">getAdvanced()</code> utility function to retrieve all the property values from the Advanced section of our content type’s form and use the spread operator <code class="highlighter-rouge">(...)</code> to expand them into the current object.</p>

<p class="bs-callout-info">The Quote content type also has a form section called Background (from the <code class="highlighter-rouge">pagebuilder_base_form_with_background_attributes</code> form). This section of the form allows end users to enter all kinds of background attributes, such as images, colors, positions and so on. If your custom content uses the Background section, you should retrieve the those attributes using the <code class="highlighter-rouge">getBackgroundImages(node)</code> utility function. However, to keep things simple for our component, we decided not to pull these attributes from the HTML.</p>

<h3 id="retrieving-data-from-different-appearances">Retrieving data from different Appearances</h3>

<p>If your content type has different appearances, the HTML for each appearance will also differ. To handle these differences, we provide the <code class="highlighter-rouge">appearance</code> within the <code class="highlighter-rouge">props</code> argument so  you can modify your queries in order to retrieve data from the correct node.</p>

<p>For our Quote content type, we only have one appearance (the default); so we do not need to use it. However, the Row content type has three appearances, so it uses a conditional based on the <code class="highlighter-rouge">props.appearance</code> value to determine the correct node to use, as shown here:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Targeting appearances in the Row aggregator</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Determine which node holds the data for the appearance</span>
    <span class="kd">const</span> <span class="nx">dataNode</span> <span class="o">=</span>
        <span class="nx">props</span><span class="p">.</span><span class="nx">appearance</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">contained</span><span class="dl">'</span> <span class="p">?</span> <span class="nx">node</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">:</span> <span class="nx">node</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">minHeight</span><span class="p">:</span> <span class="nx">dataNode</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">minHeight</span> <span class="p">?</span> <span class="nx">dataNode</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">minHeight</span> <span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="p">...</span>
    <span class="p">};</span>
</code></pre></div></div>

<h2 id="test-the-aggregator">Test the aggregator</h2>

<p>The best way to see the properties returned by your aggregator is using <code class="highlighter-rouge">console.log()</code>. For our Quote aggregator, we can do something like this:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">getAdvanced</span><span class="p">,</span> <span class="nx">getCssClasses</span><span class="p">,</span> <span class="nx">getBackgroundImages</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../../utils</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>

    <span class="kd">const</span> <span class="nx">propObject</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">quote</span><span class="p">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">textContent</span><span class="p">,</span>
        <span class="na">author</span><span class="p">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">textContent</span><span class="p">,</span>
        <span class="na">description</span><span class="p">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">innerHTML</span><span class="p">,</span>
        <span class="p">...</span><span class="nx">getAdvanced</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span>
    <span class="p">};</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">propObject</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">propObject</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Adding <code class="highlighter-rouge">console.log(node)</code> at the beginning of your aggregator function, and at he end (<code class="highlighter-rouge">console.log(propObject)</code>), helps to show you the HTML you receive and the object you return. The property object returned from our aggregator looks like this:</p>

<p><img src="images/AggregatorObjectConsoleOutput.png" alt="Aggregator object console output" /></p>

<p class="bs-callout-info">You will need to know the property <code class="highlighter-rouge">key-values</code> you are returning so that that you can assign them to corresponding properties in your component when you build it out.</p>


			
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  

  
  <div class="github-link">
    <a class="improve-page" href="https://github.com/magento/pwa-studio/tree/develop/pwa-devdocs/src/pagebuilder/custom-components/add-aggregator/index.md" target="_blank">
      Edit this page on GitHub
    </a>
  </div>
  

  
  <div class="new-issue">
    <a href="https://github.com/magento/pwa-studio/issues/new?title=Feedback on page: /pagebuilder/custom-components/add-aggregator/" target="_blank">
      Give us feedback
    </a>
  </div>
  

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->


	</div>
	<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav footer-links">
    <li><a href="http://magento.com/legal/terms/privacy/">Privacy Policy</a></li>
    <li><a href="http://magento.com/legal/terms/">Terms of Service</a></li>
    <li><a href="http://magento.com/legal/licensing/">License/Trademark FAQ</a></li>
    <li><a href="https://magentocommeng.slack.com/messages/C71HNKYS2">#pwa Slack channel</a></li>
  </ul>
    </div>

		<div class="copyright-date">&copy; 2020 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/pwa-studio/assets/js/app.min.js?ver=7"></script>

<script src="/pwa-studio/builds/js/index.bundle.js"></script>

</body>
</html>

